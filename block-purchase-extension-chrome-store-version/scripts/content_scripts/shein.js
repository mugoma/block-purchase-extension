var t;const e="existing-timer-container",n="cls-hidden",o="cs_cta_btn";function i(n,o,i="",a=!0){const l=1==a?1e3:6e4;var c=new Date(n).getTime()-Date.now();return!(c<=0)&&(t=setInterval((()=>{const n=Math.floor(c/1e3),s=Math.floor(n/3600),d=Math.floor(n%3600/60),u=Math.floor(n%60),m=!0===a?`:${u.toString().padStart(2,"0")}`:"",p=`${s.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}${m}`,f=document.getElementById(o);f&&(f.innerHTML=i+p),(c-=l)<=0&&(clearInterval(t),r(!1,document.getElementById(e)),function(t){r(t,document.getElementById("completed-timer-container"))}(!0))}),l),!0)}function r(t,e){null!==e&&(!0===t?e.classList.remove(n):e.classList.add(n))}function a(){return window.location.href}function l(t=[],e=[],n){(function(t=[],e,n=[],o=["dull-buy-btn"]){t.forEach((t=>{!function(t,e,n=[],o=["dull-buy-btn"]){const i=document.getElementById(t);if(null!=i){n.length>0&&i.classList.remove(...n),i.classList.add(...o);const t="Timer will end at "+new Date(e).toLocaleString();i.setAttribute("title",t)}}(t,e,n,o)}))})(t,n,e),function(t,e=!1){i(t,o,"",e)}(n,!0)}const c="productIntroPrice",s="common-reviews__list",d=["ProductDetailAddBtn"];!function t(e,n){window.setTimeout((function(){null!==document.getElementById(e)?n():t(e,n)}),10)}(c,(()=>{(function(){const t=document.getElementById(c);null!==t&&null!==t.parentNode&&t.parentNode.insertBefore(function(){const t=document.createElement("div"),e=document.createElement("button");return e.classList.add("btn","btn-pill","background-brown","text-white","text-center"),e.setAttribute("id",o),e.setAttribute("data-has-timer","false"),e.setAttribute("title","You can cancel the timer from the extension popup."),t.appendChild(e),t}(),t.nextSibling)})(),function(t=[],e=[]){var n;(n=a(),new Promise((t=>{chrome.storage.local.get(n,(e=>{t(void 0===e[n]?void 0:e[n].time)}))}))).then((n=>{null!=n&&"string"==typeof n&&new Date(n).getTime()>Date.now()&&l(t,e,String(n))}))}(d,[]),function(){const t=document.getElementById("cs_cta_btn");null!==t&&t.addEventListener("click",(e=>{if(e.preventDefault(),"false"==t.getAttribute("data-has-timer")){const e=a();chrome.runtime.sendMessage({action:"set-timer",url:e,initiator:"content-script"}).then((t=>{l(d,[],t)})),t.setAttribute("data-has-timer","true")}}))}()})),function t(e,n){window.setTimeout((function(){document.getElementsByClassName(e).length>0?n():t(e,n)}),10)}(s,(()=>{var t;t=s,chrome.storage.local.get({reviews:!0}).then((e=>{1==e.reviews&&function(t){const e=document.getElementsByClassName(t);e.length>0&&function(t){const e=document.getElementById("acrPopover")?.innerText,n="Click to Reveal",o=e?e+n:n,i=document.createElement("div");i.classList.add("spoiler-container"),i.classList.add("spoiler-container-blurred");const r=document.createElement("div");r.classList.add("spoiler-overlay");const a=document.createElement("span");a.classList.add("spoiler-text"),a.innerText=o,r.appendChild(a),i.appendChild(r),r.addEventListener("click",(function(){this.classList.add("display-none"),null!==this.parentElement&&(this.parentElement.classList.add("spoiler-container-unblurred"),this.parentElement.classList.remove("spoiler-container-blurred"))})),null!==t.parentNode&&t.parentNode.insertBefore(i,t),i.appendChild(t)}(e[0])}(t)}))}));