!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(()=>(()=>{"use strict";var e={90:(e,t,n)=>{n.d(t,{F$:()=>o,R5:()=>r});const o="deferred_purchases",r="completed_purchases"},454:(e,t,n)=>{n.d(t,{Ig:()=>a,Lj:()=>i,Yi:()=>r,_q:()=>d,_u:()=>c,g9:()=>u,vK:()=>s,we:()=>l});var o=n(90);n(932);const r="options-page-link",c="how-to-use-page-link",i="stats-page-link",d="my-statistics.html",s="how-to-use.html";function a(){chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():l("options.html")}function l(e){window.open(chrome.runtime.getURL("../pages/"+e))}function u(){return chrome.storage.local.get([o.F$,o.R5]).then((e=>({deferred:e[o.F$]?JSON.parse(e[o.F$]):[],completed:e[o.R5]?JSON.parse(e[o.R5]):[]})))}},928:(e,t,n)=>{n.d(t,{addNavbarEventListeners:()=>r});var o=n(454);function r(){document.getElementById(o.Yi)?.addEventListener("click",(()=>{(0,o.Ig)()})),document.getElementById(o._u)?.addEventListener("click",(()=>{(0,o.we)(o.vK)})),document.getElementById(o.Lj)?.addEventListener("click",(()=>{(0,o.we)(o._q)}))}},932:(e,t,n)=>{n(90)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};n.r(o);var r=n(454),c=n(928);const i="deferred-purchases-list",d="completed-purchases-list",s=["btn","background-brown","text-white"];let a=[],l=[],u=1,p=1;function m(e,t,n){const o=document.getElementById(t);if(!o)return;o.innerHTML="";const r=5*(n-1),c=r+5,f=e.slice(r,c);0!==f.length?(f.forEach(((e,t,n)=>{const c=document.createElement("li"),i=e?.url?e.url:e,d=e?.time?` | ${s=e.time,new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(s))} | `:"";var s;const a=e?.price?`<span class="text-brown">$${e.price}</span>`:"";c.innerHTML=`${r+t+1}. ${a}${d}${i}`,o.appendChild(c)})),function(e,t,n,o){const r=Math.ceil(t.length/5),c=document.createElement("div");c.classList.add("pagination-controls");const f=document.createElement("button");f.classList.add(...s),f.textContent="Previous",f.disabled=1===n,f.addEventListener("click",(()=>{o===i?(u--,m(a,i,u)):(p--,m(l,d,p))}));const g=document.createElement("span");g.textContent=`Page ${n} of ${r}`,g.classList.add("page-number");const h=document.createElement("button");h.classList.add(...s),h.textContent="Next",h.disabled=n===r,h.addEventListener("click",(()=>{o===i?(u++,m(a,i,u)):(p++,m(l,d,p))})),c.appendChild(f),c.appendChild(g),c.appendChild(h),1!==r&&e.appendChild(c)}(o,e,n,t)):o.innerHTML="<li>No purchases found.</li>"}function f(e,t){const n=document.getElementById(t);null!==n?n.textContent=e.length.toString():console.error(`Element with ID '${t}' not found.`)}return document.addEventListener("DOMContentLoaded",(()=>{(0,c.addNavbarEventListeners)(),(0,r.g9)().then((({deferred:e,completed:t})=>{a=e,l=t,m(a,i,u),m(l,d,p),f(a,"deferred-purchases-count"),f(l,"completed-purchases-count"),function(e,t){const n=e.reduce(((e,t)=>t.price?(100*parseFloat(t.price)+100*e)/100:e),0),o=document.getElementById(t);o?o.textContent=`Total Saved: $${n.toFixed(2)}`:console.error(`Container with ID "${t}" not found.`)}(a,"amount-saved"),function(e,t){const n={};for(const t in e)if(e.hasOwnProperty(t)){const{price:o,url:r}=e[t];n[r]?(n[r].price=(100*parseFloat(n[r].price.toString())+100*parseFloat(o.toString()))/100,n[r].count+=1):n[r]={price:o,count:1}}console.log(n);const o={};for(const e in n)n.hasOwnProperty(e)&&(o[e]={price:n[e].price/n[e].count});const r=Object.values(o).reduce(((e,t)=>e+t.price),0),c=document.getElementById(t);c?c.textContent=`Total Unique Saved: $${r.toFixed(2)}`:console.error(`Container with ID "${t}" not found.`)}(a,"unique-amount-saved")}))})),o})()));